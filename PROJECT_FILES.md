# 📁 Project Files Summary

This directory contains a complete automated menu scraping and deployment system for Eurest Kaserne Timeout restaurant.

## 🐍 Core Python Scripts

### `python.py` (Main Scraper)
- **Purpose**: Web scraper for Eurest Kaserne Timeout lunch menu
- **Features**: Extracts menu items, prices, categories, descriptions
- **Dependencies**: Built-in Python libraries only (urllib, html.parser, re, json)
- **Usage**: `python python.py`
- **Output**: JSON file + formatted console display

### `generate_website.py` (HTML Generator)
- **Purpose**: Converts scraped JSON data into beautiful HTML website
- **Features**: Responsive design, categorized display, price statistics
- **Usage**: `python generate_website.py <menu_json_file>`
- **Output**: `index.html` with embedded CSS and JavaScript

## 🤖 GitHub Actions

### `.github/workflows/daily-menu-scraper.yml`
- **Purpose**: Automated daily scraping and release generation
- **Schedule**: Daily at 10:30 AM UTC (lunch time in Switzerland)
- **Process**: 
  1. Scrapes menu using `python.py`
  2. Generates website using `generate_website.py`
  3. Creates GitHub release with HTML website
  4. Packages everything as downloadable archive

## 🖥️ Server Deployment

### `deploy-menu.sh` (Deployment Script)
- **Purpose**: Downloads latest GitHub release and deploys to nginx
- **Features**: 
  - Automatic backup of current deployment
  - Download and validation of new release
  - Nginx configuration testing
  - Proper file permissions and ownership
- **Usage**: `sudo ./deploy-menu.sh`

### `setup-cron.sh` (Cron Setup)
- **Purpose**: Sets up automated deployment via cron jobs
- **Features**:
  - Configures cron to run hourly during lunch hours
  - Creates monitoring scripts
  - Sets up systemd timers as alternative
  - Configures log rotation
- **Usage**: `sudo ./setup-cron.sh`

### `nginx-eurest-menu.conf` (Nginx Configuration)
- **Purpose**: Nginx server configuration for hosting the menu website
- **Features**:
  - Optimized caching for static assets
  - Security headers
  - CORS support for API access
  - Health check endpoints
  - Optional HTTPS configuration

## 📚 Documentation

### `README.md` (User Guide)
- **Purpose**: Complete user documentation for the scraper
- **Contents**: Features, usage examples, JSON format, requirements

### `DEPLOYMENT.md` (Deployment Guide)
- **Purpose**: Step-by-step deployment instructions
- **Contents**: Complete setup guide from GitHub to production server

### `PROJECT_FILES.md` (This File)
- **Purpose**: Overview of all project files and their purposes

## 🗂️ Generated Files

### `eurest_menu_YYYYMMDD_HHMMSS.json`
- **Purpose**: Raw menu data in JSON format
- **Generated by**: `python.py`
- **Contains**: Restaurant info, menu items, prices, categories, timestamps

### `index.html`
- **Purpose**: Beautiful responsive website displaying the menu
- **Generated by**: `generate_website.py`
- **Features**: Mobile-friendly, categorized display, print support

### `latest_release.txt`
- **Purpose**: Points to the latest GitHub release tag
- **Generated by**: GitHub Actions
- **Usage**: Used by deployment scripts to find latest release

## 🔄 Workflow Overview

```
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│   python.py     │───▶│ generate_website │───▶│ GitHub Release  │
│ (Scrape Menu)   │    │ (Create HTML)    │    │ (Archive)       │
└─────────────────┘    └──────────────────┘    └─────────────────┘
         │                                               │
         ▼                                               ▼
┌─────────────────┐    ┌──────────────────┐    ┌─────────────────┐
│  JSON Data      │    │   Cron Job       │───▶│  nginx Server   │
│ (Menu Items)    │    │ (Auto Deploy)    │    │ (Website Live)  │
└─────────────────┘    └──────────────────┘    └─────────────────┘
```

## 🚀 Quick Start

### For GitHub (Automated Scraping):
1. Create GitHub repository
2. Upload `python.py`, `generate_website.py`, and workflow file
3. Edit workflow to use your repository name
4. Action runs daily and creates releases

### For Server (Website Hosting):
1. Copy deployment files to server
2. Run `sudo ./setup-cron.sh`
3. Configure nginx with provided config
4. Website auto-updates from GitHub releases

## 🛠️ Customization

### Change Scraping Schedule:
- Edit cron expression in `.github/workflows/daily-menu-scraper.yml`

### Change Deployment Schedule:
- Edit cron schedule in `setup-cron.sh`
- Or modify systemd timer

### Customize Website Design:
- Edit CSS in `generate_website.py`
- Modify HTML structure and styling

### Add More Restaurants:
- Extend `python.py` to handle multiple URLs
- Modify website generator for multiple sources

## 📊 Monitoring

### Log Files:
- `/var/log/eurest-menu-deploy.log` - Deployment activities
- `/var/log/eurest-menu-cron.log` - Cron job outputs
- `/var/log/nginx/eurest-menu.*.log` - Web server logs

### Health Checks:
- `http://yourserver/health` - Basic health check
- `http://yourserver/status` - Deployment status
- `/opt/eurest-menu/monitor-menu.sh` - Monitoring script

## 🔐 Security Notes

- All scripts include input validation
- Nginx config includes security headers
- Log rotation configured to prevent disk space issues
- Backup system for rollback capability

## 📱 Mobile Support

The generated website is fully responsive and works on:
- Desktop browsers
- Mobile phones
- Tablets
- Print media (special print stylesheet)

---

**Total Files**: 9 core files + generated content
**Languages**: Python, Bash, HTML/CSS, YAML
**Dependencies**: Minimal (built-in libraries only)
**License**: Educational/Personal use
